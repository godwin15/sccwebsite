<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
       
        <link href="https://fonts.googleapis.com/css2?family=Alegreya:wght@400;500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/give-online.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/about.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/materials.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/worship.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/menu.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/form.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/alternative.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
        <!-- Link Swiper's CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
        <script src="https://js.stripe.com/v3/"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <!-- Bootstrap -->
        <title> {{title}} </title>
    </head>

    <body>
        <header>
            <!-- Navigation Bar -->
            <nav class="navbar">
                <a href="/" class="nav-branding"><img src="{{ url_for('static', filename='images/logo.jpg') }}" alt="logo"></a>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="/" class="nav-link">Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="/about" class="nav-link">About</a>
                    </li>
                    <li class="nav-item">
                        <a href="/#resources" class="nav-link">Resources</a>
                    </li>
                    <li class="nav-item" >
                        <a href="javascript:openGiving()" class="nav-link" id="giveonline">GIVE ONLINE</a>
                    </li>
                </ul>
                <div class="hamburger">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </nav>
        </header>
        <main class="page">
            {% block content %}
            
            {% endblock %}
        </main>
          <!-- Giving Form -->
        <div class="form-container-giv" id="givingForm">
            <div class="form-popup-giv">
                <form id="payment-form" action="{{url_for('payment')}}" method="POST">
                    <label for="amount-input">Enter amount in USD</label>
                    <input id="amount-input" type="number" name="amount" step="0.01" min="0.01" placeholder="Amount" required>
                    <button type="button" onclick="validateAndOpenStripeCheckout();" class="btn">Proceed to Give</button>
                    <button type="button" class="cancel" onclick="closeGiving()">Close</button>
                </form>
            </div>
        </div>

        <!-- Subscription Form-->
        <div class="form-container" id="myForm">
            <div class="form-popup">
                <div id="mc_embed_shell">
                    <div id="mc_embed_signup">
                        <form action="https://soundcloud.us21.list-manage.com/subscribe/post?u=472e5298779388e28d62e249e&amp;id=9e13237b5c&amp;f_id=00745de1f0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank">
                            <div id="mc_embed_signup_scroll"><h2>Stay Connected With Us</h2>
                                <div class="indicates-required indicate"><span class="asterisk star">*</span> Indicates Required</div>
                                <div class="mc-field-group"><label for="mce-FNAME">First Name </label>
                                <input type="text" name="FNAME" class="text" id="mce-FNAME" value=""></div>
                                <div class="mc-field-group"><label for="mce-LNAME">Last Name </label>
                                <input type="text" name="LNAME" class="text" id="mce-LNAME" value=""></div>
                                <div class="mc-field-group"><label for="mce-EMAIL">Email Address <span class="asterisk star">*</span></label>
                                <input type="email" name="EMAIL" class="required email" id="mce-EMAIL" required="" value=""></div>
                                <div class="mc-field-group"><label for="mce-PHONE">Phone Number </label>
                                <input type="text" name="PHONE" class="REQ_CSS" id="mce-PHONE" value=""></div>
                                <div id="mce-responses" class="clear">
                                <div class="response" id="mce-error-response" style="display: none;"></div>
                                <div class="response" id="mce-success-response" style="display: none;"></div>
                            </div>
                            <div aria-hidden="true" style="position: absolute; left: -5000px;">
                                <input type="text" name="b_472e5298779388e28d62e249e_9e13237b5c" tabindex="-1" value="">
                            </div>
                            <div class="clear"><input type="submit" name="subscribe" id="mc-embedded-subscribe" class="button sub-scribe" value="Subscribe"></div>
                        </div>
                        <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
                    </form>
                    </div>
                    <script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"></script><script type="text/javascript">(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';fnames[0]='EMAIL';ftypes[0]='email';fnames[4]='PHONE';ftypes[4]='phone';fnames[3]='ADDRESS';ftypes[3]='address';fnames[5]='BIRTHDAY';ftypes[5]='birthday';}(jQuery));var $mcj = jQuery.noConflict(true);</script></div>
            </div>
        </div>
    <!--Footer-->
        <footer>
            <div class="grid-container">
                <div class="grid-item">
                    <img src="{{ url_for('static', filename='images/image-logo.jpg') }}"alt="Lighting up the dark places">
                    <div class="media select">
                        <div>LINKS &rarr;</div>
                        <a href="/about">About</a>
                        <a href="/#resources">Resources</a>
                        <a href="javascript:openGiving()" class="online">GIVE ONLINE</a>
                    </div>
                </div>

                <div class="grid-item">
                    <div>
                        <div class="grid-container2">
                            <h3>Click to join our mail list</h3>
                                <button onclick="openForm()">Subscribe</button>
                            <h5>Stream our messages on;</h5>
                            <div class="media">
                                <a href="https://podcasts.apple.com/us/podcast/supernatural-community-church/id1688783080" target="_blank" class="podcast"> <i class="fa fa-podcast" style="font-size:30px;"></i> </a>
                                <a href="https://soundcloud.com/user-361210320" target="_blank" class="sound-cloud"> <i class="fa fa-soundcloud" style="font-size:30px;"></i> </a>
                                <a href="https://open.spotify.com/show/1Z6rvc2qPF5aagpPq9D4uu" target="_blank" class="spotify"> <i class="fa fa-spotify" style="font-size:30px;"></i> </a>
                            </div>
                        </div>
                    </div>
                </div> 

                <div class="grid-item">
                    <div class="grid-container2">
                        <h2>Contact Us</h2>
                        <h4> &#x1F4DE; 585-210-5038</h4> 
                        <h4> &#x2709; Supernaturalcommunitychurch@gmail.com</h4>
                        <h5>Follow us on social media</h5>
                        <div class="media">
                            <a href="https://www.instagram.com/supernaturalcommunitychurch/" target="_blank" rel="noopener noreferrer" class="instagram"> <i class="fa fa-instagram" style="font-size:25px"> </i></a>
                            <a href="https://www.facebook.com/profile.php?id=100094661213633" target="_blank" rel="noopener noreferrer" class="facebook"><i class="fa fa-facebook-official" style="font-size:25px"></i></a>
                            <a href="https://twitter.com/scc_church" target="_blank" rel="noopener noreferrer" class="twitter"><i class="fa fa-twitter-square" style="font-size:25px"></i></a>
                        </div>
                    </div>
                </div>
            </div> 
        </footer>

        <!-- Swiper JS 
        <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
         Initialize Swiper 
        <script>
            var swiper = new Swiper(".mySwiper", {
                effect: "flip",
                grabCursor: true,
                pagination: {
                    el: ".swiper-pagination",
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
            });
        </script> -->
        <!--Script for initializing Stripe-->
        <script>
            function openStripeCheckout() {
                var amount = document.getElementById("amount-input").value;

                // Create a Stripe Checkout Session
                fetch("/create-checkout-session", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        amount: amount * 100,
                    }),
                })
                .then(function (response) {
                    return response.json();
                })
                .then(function (session) {
                    var stripe = Stripe('{{public_key}}');
                    return stripe.redirectToCheckout({ sessionId: session.id });
                })
                .then(function (result) {
                    if (result && result.error) {
                        // Handle any errors during the redirect to checkout
                        console.error(result.error.message);
                        throw new Error(result.error.message); // Throw error to be caught in the catch block
                    }
                })
                .catch(function (error) {
                    console.error("Error:", error);
                    // Redirect to the 'other-option' URL when Stripe function fails
                    window.location.href = '/give-online';
                });
            }
            function validateAndOpenStripeCheckout() {
                var amountInput = document.getElementById('amount-input');
                if (amountInput.checkValidity()) {
                    openStripeCheckout();
                } else {
                    // This will show the browser's default validation message
                    amountInput.reportValidity();
                }
            }

          </script>
        <!--Form Script-->
        <script>
             function openGiving() {
              document.getElementById("givingForm").style.display = "flex";
            }
            function closeGiving() {
              document.getElementById("givingForm").style.display = "none";
            }

            function openForm() {
              document.getElementById("myForm").style.display = "flex";
            }
            function closeForm() {
              document.getElementById("myForm").style.display = "none";
            }
            </script>
        <!-- Scripts -->
        <script src="{{ url_for('static', filename='scripts/menu.js') }}"> </script>
    </body>
</html>